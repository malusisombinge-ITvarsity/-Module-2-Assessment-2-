/*!
* Name : Video Background Extension for Jarallax
* Version : 1.0.1
* Author : nK <https://nkdev.info>
* GitHub : https://github.com/nk-o/jarallax
*/!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){if(!i.o(e,t))Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){if("undefined"!=typeof Symbol&&Symbol.toStringTag)Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t)e=i(e);if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([,,function(e,t){e.exports=function(e){if("complete"===document.readyState||"interactive"===document.readyState)e.call();else if(document.attachEvent)document.attachEvent("onreadystatechange",(function(){if("interactive"===document.readyState)e.call()}));else if(document.addEventListener)document.addEventListener("DOMContentLoaded",e)}},,function(e,t,i){(function(t){var i;if("undefined"!=typeof window)i=window;else if(void 0!==t)i=t;else if("undefined"!=typeof self)i=self;else i={};e.exports=i}).call(this,i(5))},function(e,t){function i(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator)i=function(e){return typeof e};else i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return i(e)}var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){if("object"===("undefined"==typeof window?"undefined":i(window)))o=window}e.exports=o},function(e,t,i){e.exports=i(7)},function(e,t,i){"use strict";i.r(t);var o=i(8),n=i.n(o),a=i(4),r=i.n(a),l=i(2),s=i.n(l),p=i(10);r.a.VideoWorker=r.a.VideoWorker||n.a,Object(p.default)(),s()((function(){if("undefined"!=typeof jarallax)jarallax(document.querySelectorAll("[data-jarallax-video]"))}))},function(e,t,i){e.exports=i(9)},function(e,t,i){"use strict";function o(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator)o=function(e){return typeof e};else o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(e)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];if(o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o)o.writable=!0;Object.defineProperty(e,o.key,o)}}function a(){this._done=[],this._fail=[]}i.r(t),i.d(t,"default",(function(){return y})),a.prototype={execute:function(e,t){var i=e.length;for(t=Array.prototype.slice.call(t);i--;)e[i].apply(null,t)},resolve:function(){this.execute(this._done,arguments)},reject:function(){this.execute(this._fail,arguments)},done:function(e){this._done.push(e)},fail:function(e){this._fail.push(e)}};var r=0,l=0,s=0,p=0,u=0,d=new a,f=new a,y=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);if(this.url=t,this.options_default={autoplay:!1,loop:!1,mute:!1,volume:100,showContols:!0,startTime:0,endTime:0},this.options=this.extend({},this.options_default,i),this.videoID=this.parseURL(t),this.videoID)this.ID=r++,this.loadAPI(),this.init()}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i)}(e,[{key:"extend",value:function(e){var t=arguments;return e=e||{},Object.keys(arguments).forEach((function(i){if(t[i])Object.keys(t[i]).forEach((function(o){e[o]=t[i][o]}))})),e}},{key:"parseURL",value:function(e){var t,i,o,n,a=(t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/))&&11===t[1].length?t[1]:!1,r=function(e){var t=e.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/);return t&&t[3]?t[3]:!1}(e),l=(i=e.split(/,(?=mp4\:|webm\:|ogv\:|ogg\:)/),o={},n=0,i.forEach((function(e){var t=e.match(/^(mp4|webm|ogv|ogg)\:(.*)/);if(t&&t[1]&&t[2])o["ogv"===t[1]?"ogg":t[1]]=t[2],n=1})),n?o:!1);if(a)return this.type="youtube",a;else if(r)return this.type="vimeo",r;else if(l)return this.type="local",l;return!1}},{key:"isValid",value:function(){return!!this.videoID}},{key:"on",value:function(e,t){this.userEventsList=this.userEventsList||[],(this.userEventsList[e]||(this.userEventsList[e]=[])).push(t)}},{key:"off",value:function(e,t){var i=this;if(this.userEventsList&&this.userEventsList[e])if(!t)delete this.userEventsList[e];else this.userEventsList[e].forEach((function(o,n){if(o===t)i.userEventsList[e][n]=!1}))}},{key:"fire",value:function(e){var t=this,i=[].slice.call(arguments,1);if(this.userEventsList&&void 0!==this.userEventsList[e])this.userEventsList[e].forEach((function(e){if(e)e.apply(t,i)}))}},{key:"play",value:function(e){var t=this;if(t.player){if("youtube"===t.type&&t.player.playVideo){if(void 0!==e)t.player.seekTo(e||0);if(YT.PlayerState.PLAYING!==t.player.getPlayerState())t.player.playVideo()}if("vimeo"===t.type){if(void 0!==e)t.player.setCurrentTime(e);t.player.getPaused().then((function(e){if(e)t.player.play()}))}if("local"===t.type){if(void 0!==e)t.player.currentTime=e;if(t.player.paused)t.player.play()}}}},{key:"pause",value:function(){var e=this;if(e.player){if("youtube"===e.type&&e.player.pauseVideo)if(YT.PlayerState.PLAYING===e.player.getPlayerState())e.player.pauseVideo();if("vimeo"===e.type)e.player.getPaused().then((function(t){if(!t)e.player.pause()}));if("local"===e.type)if(!e.player.paused)e.player.pause()}}},{key:"mute",value:function(){if(this.player){if("youtube"===this.type&&this.player.mute)this.player.mute();if("vimeo"===this.type&&this.player.setVolume)this.player.setVolume(0);if("local"===this.type)this.$video.muted=!0}}},{key:"unmute",value:function(){if(this.player){if("youtube"===this.type&&this.player.mute)this.player.unMute();if("vimeo"===this.type&&this.player.setVolume)this.player.setVolume(this.options.volume);if("local"===this.type)this.$video.muted=!1}}},{key:"setVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,t=this;if(t.player&&e){if("youtube"===t.type&&t.player.setVolume)t.player.setVolume(e);if("vimeo"===t.type&&t.player.setVolume)t.player.setVolume(e);if("local"===t.type)t.$video.volume=e/100}}},{key:"getVolume",value:function(e){if(this.player){if("youtube"===this.type&&this.player.getVolume)e(this.player.getVolume());if("vimeo"===this.type&&this.player.getVolume)this.player.getVolume().then((function(t){e(t)}));if("local"===this.type)e(100*this.$video.volume)}else e(!1)}},{key:"getMuted",value:function(e){if(this.player){if("youtube"===this.type&&this.player.isMuted)e(this.player.isMuted());if("vimeo"===this.type&&this.player.getVolume)this.player.getVolume().then((function(t){e(!!t)}));if("local"===this.type)e(this.$video.muted)}else e(null)}},{key:"getImageURL",value:function(e){var t=this;if(!t.videoImage){if("youtube"===t.type){var i=["maxresdefault","sddefault","hqdefault","0"],o=0,n=new Image;n.onload=function(){if(120!==(this.naturalWidth||this.width)||o===i.length-1)t.videoImage="https://img.youtube.com/vi/".concat(t.videoID,"/").concat(i[o],".jpg"),e(t.videoImage);else o++,this.src="https://img.youtube.com/vi/".concat(t.videoID,"/").concat(i[o],".jpg")},n.src="https://img.youtube.com/vi/".concat(t.videoID,"/").concat(i[o],".jpg")}if("vimeo"===t.type){var a=new XMLHttpRequest;a.open("GET","https://vimeo.com/api/v2/video/".concat(t.videoID,".json"),!0),a.onreadystatechange=function(){if(4===this.readyState)if(this.status>=200&&this.status<400){var i=JSON.parse(this.responseText);t.videoImage=i[0].thumbnail_large,e(t.videoImage)}},a.send(),a=null}}else e(t.videoImage)}},{key:"getIframe",value:function(e){this.getVideo(e)}},{key:"getVideo",value:function(e){var t=this;if(!t.$video)t.onAPIready((function(){var i;if(!t.$video)(i=document.createElement("div")).style.display="none";if("youtube"===t.type){if(t.playerOptions={},t.playerOptions.videoId=t.videoID,t.playerOptions.playerVars={autohide:1,rel:0,autoplay:0,playsinline:1},!t.options.showContols)t.playerOptions.playerVars.iv_load_policy=3,t.playerOptions.playerVars.modestbranding=1,t.playerOptions.playerVars.controls=0,t.playerOptions.playerVars.showinfo=0,t.playerOptions.playerVars.disablekb=1;var o,n;t.playerOptions.events={onReady:function(e){if(t.options.mute)e.target.mute();else if(t.options.volume)e.target.setVolume(t.options.volume);if(t.options.autoplay)t.play(t.options.startTime);if(t.fire("ready",e),t.options.loop&&!t.options.endTime){t.options.endTime=t.player.getDuration()-.1}setInterval((function(){t.getVolume((function(i){if(t.options.volume!==i)t.options.volume=i,t.fire("volumechange",e)}))}),150)},onStateChange:function(e){if(t.options.loop&&e.data===YT.PlayerState.ENDED)t.play(t.options.startTime);if(!o&&e.data===YT.PlayerState.PLAYING)o=1,t.fire("started",e);if(e.data===YT.PlayerState.PLAYING)t.fire("play",e);if(e.data===YT.PlayerState.PAUSED)t.fire("pause",e);if(e.data===YT.PlayerState.ENDED)t.fire("ended",e);if(e.data===YT.PlayerState.PLAYING)n=setInterval((function(){if(t.fire("timeupdate",e),t.options.endTime&&t.player.getCurrentTime()>=t.options.endTime)if(t.options.loop)t.play(t.options.startTime);else t.pause()}),150);else clearInterval(n)}};var a=!t.$video;if(a){var r=document.createElement("div");r.setAttribute("id",t.playerID),i.appendChild(r),document.body.appendChild(i)}if(t.player=t.player||new window.YT.Player(t.playerID,t.playerOptions),a)t.$video=document.getElementById(t.playerID),t.videoWidth=parseInt(t.$video.getAttribute("width"),10)||1280,t.videoHeight=parseInt(t.$video.getAttribute("height"),10)||720}if("vimeo"===t.type){if(t.playerOptions={id:t.videoID,autopause:0,transparent:0,autoplay:t.options.autoplay?1:0,loop:t.options.loop?1:0,muted:t.options.mute?1:0},t.options.volume)t.playerOptions.volume=t.options.volume;if(!t.options.showContols)t.playerOptions.badge=0,t.playerOptions.byline=0,t.playerOptions.portrait=0,t.playerOptions.title=0,t.playerOptions.background=1;if(!t.$video){var l="";Object.keys(t.playerOptions).forEach((function(e){if(""!==l)l+="&";l+="".concat(e,"=").concat(encodeURIComponent(t.playerOptions[e]))})),t.$video=document.createElement("iframe"),t.$video.setAttribute("id",t.playerID),t.$video.setAttribute("src","https://player.vimeo.com/video/".concat(t.videoID,"?").concat(l)),t.$video.setAttribute("frameborder","0"),t.$video.setAttribute("mozallowfullscreen",""),t.$video.setAttribute("allowfullscreen",""),i.appendChild(t.$video),document.body.appendChild(i)}if(t.player=t.player||new Vimeo.Player(t.$video,t.playerOptions),t.options.startTime&&t.options.autoplay)t.player.setCurrentTime(t.options.startTime);var s;t.player.getVideoWidth().then((function(e){t.videoWidth=e||1280})),t.player.getVideoHeight().then((function(e){t.videoHeight=e||720})),t.player.on("timeupdate",(function(e){if(!s)t.fire("started",e),s=1;if(t.fire("timeupdate",e),t.options.endTime)if(t.options.endTime&&e.seconds>=t.options.endTime)if(t.options.loop)t.play(t.options.startTime);else t.pause()})),t.player.on("play",(function(e){if(t.fire("play",e),t.options.startTime&&0===e.seconds)t.play(t.options.startTime)})),t.player.on("pause",(function(e){t.fire("pause",e)})),t.player.on("ended",(function(e){t.fire("ended",e)})),t.player.on("loaded",(function(e){t.fire("ready",e)})),t.player.on("volumechange",(function(e){t.fire("volumechange",e)}))}if("local"===t.type){if(!t.$video){if(t.$video=document.createElement("video"),t.options.showContols)t.$video.controls=!0;if(t.options.mute)t.$video.muted=!0;else if(t.$video.volume)t.$video.volume=t.options.volume/100;if(t.options.loop)t.$video.loop=!0;t.$video.setAttribute("playsinline",""),t.$video.setAttribute("webkit-playsinline",""),t.$video.setAttribute("id",t.playerID),i.appendChild(t.$video),document.body.appendChild(i),Object.keys(t.videoID).forEach((function(e){var i,o,n,a;i=t.$video,o=t.videoID[e],n="video/".concat(e),(a=document.createElement("source")).src=o,a.type=n,i.appendChild(a)}))}var p;t.player=t.player||t.$video,t.player.addEventListener("playing",(function(e){if(!p)t.fire("started",e);p=1})),t.player.addEventListener("timeupdate",(function(e){if(t.fire("timeupdate",e),t.options.endTime)if(t.options.endTime&&this.currentTime>=t.options.endTime)if(t.options.loop)t.play(t.options.startTime);else t.pause()})),t.player.addEventListener("play",(function(e){t.fire("play",e)})),t.player.addEventListener("pause",(function(e){t.fire("pause",e)})),t.player.addEventListener("ended",(function(e){t.fire("ended",e)})),t.player.addEventListener("loadedmetadata",(function(){if(t.videoWidth=this.videoWidth||1280,t.videoHeight=this.videoHeight||720,t.fire("ready"),t.options.autoplay)t.play(t.options.startTime)})),t.player.addEventListener("volumechange",(function(e){t.getVolume((function(e){t.options.volume=e})),t.fire("volumechange",e)}))}e(t.$video)}));else e(t.$video)}},{key:"init",value:function(){this.playerID="VideoWorker-".concat(this.ID)}},{key:"loadAPI",value:function(){if(!l||!s){var e="";if("youtube"===this.type&&!l)l=1,e="https://www.youtube.com/iframe_api";if("vimeo"===this.type&&!s){if(s=1,"undefined"!=typeof Vimeo)return;e="https://player.vimeo.com/api/player.js"}if(e){var t=document.createElement("script"),i=document.getElementsByTagName("head")[0];t.src=e,i.appendChild(t),i=null,t=null}}}},{key:"onAPIready",value:function(e){if("youtube"===this.type)if(("undefined"==typeof YT||0===YT.loaded)&&!p)p=1,window.onYouTubeIframeAPIReady=function(){window.onYouTubeIframeAPIReady=null,d.resolve("done"),e()};else if("object"===("undefined"==typeof YT?"undefined":o(YT))&&1===YT.loaded)e();else d.done((function(){e()}));if("vimeo"===this.type)if("undefined"==typeof Vimeo&&!u){u=1;var t=setInterval((function(){if("undefined"!=typeof Vimeo)clearInterval(t),f.resolve("done"),e()}),20)}else if("undefined"!=typeof Vimeo)e();else f.done((function(){e()}));if("local"===this.type)e()}}]),e}()},function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return l}));var o=i(8),n=i.n(o),a=i(4),r=i.n(a);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.jarallax;if(void 0!==e){var t=e.constructor,i=t.prototype.onScroll;t.prototype.onScroll=function(){var e=this;if(i.apply(e),!e.isVideoInserted&&e.video&&(!e.options.videoLazyLoading||e.isElementInViewport)&&!e.options.disableVideo())e.isVideoInserted=!0,e.video.getVideo((function(t){var i=t.parentNode;e.css(t,{position:e.image.position,top:"0px",left:"0px",right:"0px",bottom:"0px",width:"100%",height:"100%",maxWidth:"none",maxHeight:"none",margin:0,zIndex:-1}),e.$video=t,e.image.$container.appendChild(t),i.parentNode.removeChild(i)}))};var o=t.prototype.coverImage;t.prototype.coverImage=function(){var e=o.apply(this),t=this.image.$item?this.image.$item.nodeName:!1;if(e&&this.video&&t&&("IFRAME"===t||"VIDEO"===t)){var i=e.image.height,n=i*this.image.width/this.image.height,a=(e.container.width-n)/2,r=e.image.marginTop;if(e.container.width>n)i=(n=e.container.width)*this.image.height/this.image.width,a=0,r+=(e.image.height-i)/2;if("IFRAME"===t)i+=400,r-=200;this.css(this.$video,{width:"".concat(n,"px"),marginLeft:"".concat(a,"px"),height:"".concat(i,"px"),marginTop:"".concat(r,"px")})}return e};var a=t.prototype.initImg;t.prototype.initImg=function(){var e=a.apply(this);if(!this.options.videoSrc)this.options.videoSrc=this.$item.getAttribute("data-jarallax-video")||null;if(this.options.videoSrc)return this.defaultInitImgResult=e,!0;else return e};var l=t.prototype.canInitParallax;t.prototype.canInitParallax=function(){var e=this,t=l.apply(e);if(!e.options.videoSrc)return t;var i=new n.a(e.options.videoSrc,{autoplay:!0,loop:e.options.videoLoop,showContols:!1,startTime:e.options.videoStartTime||0,endTime:e.options.videoEndTime||0,mute:e.options.videoVolume?0:1,volume:e.options.videoVolume||0});if(i.isValid())if(!t){if(!e.defaultInitImgResult)i.getImageURL((function(t){var i=e.$item.getAttribute("style");if(i)e.$item.setAttribute("data-jarallax-original-styles",i);e.css(e.$item,{"background-image":'url("'.concat(t,'")'),"background-position":"center","background-size":"cover"})}))}else if(i.on("ready",(function(){if(e.options.videoPlayOnlyVisible){var t=e.onScroll;e.onScroll=function(){if(t.apply(e),e.options.videoLoop||!e.options.videoLoop&&!e.videoEnded)if(e.isVisible())i.play();else i.pause()}}else i.play()})),i.on("started",(function(){if(e.image.$default_item=e.image.$item,e.image.$item=e.$video,e.image.width=e.video.videoWidth||1280,e.image.height=e.video.videoHeight||720,e.coverImage(),e.clipContainer(),e.onScroll(),e.image.$default_item)e.image.$default_item.style.display="none"})),i.on("ended",(function(){if(e.videoEnded=!0,!e.options.videoLoop)if(e.image.$default_item)e.image.$item=e.image.$default_item,e.image.$item.style.display="block",e.coverImage(),e.clipContainer(),e.onScroll()})),e.video=i,!e.defaultInitImgResult)if(e.image.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","local"!==i.type)return i.getImageURL((function(t){e.image.bgImage='url("'.concat(t,'")'),e.init()})),!1;else return!0;return t};var s=t.prototype.destroy;t.prototype.destroy=function(){if(this.image.$default_item)this.image.$item=this.image.$default_item,delete this.image.$default_item;s.apply(this)}}}}]);